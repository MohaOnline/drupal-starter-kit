!function(t){"function"==typeof define&&define.amd?define(t):t()}(function(){var t,n=jQuery,e=/*#__PURE__*/function(){function t(t){this.settings=t}var e=t.prototype;return e.validateSortCode=function(t){var e=this;return new Promise(function(r,o){n.post(e.settings.sortCodeEndpoint,{Key:e.settings.key,SortCode:t}).done(function(t){if(1===t.Items.length){var n=t.Items[0];void 0!==n.Error&&(n.Error=parseInt(n.Error),n.Error<1e3&&o(Error("Configuration error"))),r(n)}else r({Error:-101,Description:"No matching branch found."})}).fail(function(t){o(Error("Request error"))})})},e.validateAccount=function(t,e){var r=this;return new Promise(function(o,i){n.post(r.settings.accountEndpoint,{Key:r.settings.key,AccountNumber:e,SortCode:t}).done(function(t){if(1===t.Items.length){var n=t.Items[0];void 0!==n.Error&&(n.Error=parseInt(n.Error),n.Error<1e3&&i(Error("Configuration error"))),n.Error||n.IsDirectDebitCapable||o({Error:-100,Description:"Account is not able to handle direct debit."}),o(n)}else o({Error:-101,Description:"No matching account found."})}).fail(function(t){i(Error("Request error"))})})},t}(),r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(t){var n=this.formSubmitted;this.prepareElement(t),this.currentElements=$(t),this.formSubmitted=n,this.successList.push(t),delete this.invalid[t.name],this.showErrors()}function i(t,n){var e={};e[t.name]=n,this.invalid[t.name]=!0,this.showErrors(e)}t={},function(){var n,e,r,o,i,a,l,s,u,c,f,d,p,h,m=[].indexOf;t.starts=function(t,n,e){return n===t.substr(e,n.length)},t.ends=function(t,n,e){var r;return n===t.substr(t.length-(r=n.length)-(e||0),r)},t.repeat=d=function(t,n){var e;for(e="";n>0;)1&n&&(e+=t),n>>>=1,t+=t;return e},t.compact=function(t){var n,e,r,o;for(o=[],n=0,r=t.length;n<r;n++)(e=t[n])&&o.push(e);return o},t.count=function(t,n){var e,r;if(e=r=0,!n.length)return 1/0;for(;r=1+t.indexOf(n,r);)e++;return e},t.merge=function(t,n){return a(a({},t),n)},a=t.extend=function(t,n){var e;for(e in n)t[e]=n[e];return t},t.flatten=l=function(t){var n,e,r,o;for(e=[],r=0,o=t.length;r<o;r++)n=t[r],"[object Array]"===Object.prototype.toString.call(n)?e=e.concat(l(n)):e.push(n);return e},t.del=function(t,n){var e;return e=t[n],delete t[n],e},t.some=null!=(f=Array.prototype.some)?f:function(t){var n,e;for(n=0,e=this.length;n<e;n++)if(t(this[n]))return!0;return!1},t.invertLiterate=function(t){var n,e,r,o,i,a,l,s,u;for(s=[],n=/^\s*$/,r=/^[\t ]/,l=/^(?:\t?| {0,3})(?:[\*\-\+]|[0-9]{1,9}\.)[ \t]/,o=!1,e=0,i=(u=t.split("\n")).length;e<i;e++)n.test(a=u[e])?(o=!1,s.push(a)):o||l.test(a)?(o=!0,s.push("# "+a)):!o&&r.test(a)?s.push(a):(o=!0,s.push("# "+a));return s.join("\n")},r=function(t,n){return n?{first_line:t.first_line,first_column:t.first_column,last_line:n.last_line,last_column:n.last_column,last_line_exclusive:n.last_line_exclusive,last_column_exclusive:n.last_column_exclusive,range:[t.range[0],n.range[1]]}:t},t.extractAllCommentTokens=function(t){var n,e,r,o,i,a,l,s,u,c,f,d;for(n={},r=0,a=t.length;r<a;r++)if((d=t[r]).comments)for(o=0,l=(u=d.comments).length;o<l;o++)n[(e=u[o]).locationData.range[0]]=e;for(c=[],i=0,s=(f=Object.keys(n).sort(function(t,n){return t-n})).length;i<s;i++)c.push(n[f[i]]);return c},o=function(t){return t.range[0]+"-"+t.range[1]},t.buildTokenDataDictionary=i=function(t){var n,e,r,i,a,l;for(a={},e=0,r=t.length;e<r;e++){var s;(i=t[e]).comments&&(null==a[l=o(i[2])]&&(a[l]={}),i.comments&&(s=null!=(n=a[l]).comments?n.comments:n.comments=[]).push.apply(s,i.comments))}return a},t.addDataToNode=function(t,n,a,l,s,u){return void 0===u&&(u=!0),function(c){var f,d,p,h,m;return f=r(null!=(p=null!=a?a.locationData:void 0)?p:n,null!=(h=null!=s?s.locationData:void 0)?h:l),null!=(null!=c?c.updateLocationDataIfMissing:void 0)&&null!=n?c.updateLocationDataIfMissing(f,u):c.locationData=f,null==t.tokenData&&(t.tokenData=i(t.parser.tokens)),null!=c.locationData&&(d=o(c.locationData),null!=(null!=(m=t.tokenData[d])?m.comments:void 0)&&e(t.tokenData[d].comments,c)),c}},t.attachCommentsToNode=e=function(t,n){var e;if(null!=t&&0!==t.length)return null==n.comments&&(n.comments=[]),(e=n.comments).push.apply(e,t)},t.locationDataToString=function(t){var n;return"2"in t&&"first_line"in t[2]?n=t[2]:"first_line"in t&&(n=t),n?n.first_line+1+":"+(n.first_column+1)+"-"+(n.last_line+1)+":"+(n.last_column+1):"No location data"},t.baseFileName=function(t,n,e){var r;return void 0===n&&(n=!1),void 0===e&&(e=!1),r=t.split(e?/\\|\//:/\//),t=r[r.length-1],n&&t.indexOf(".")>=0?((r=t.split(".")).pop(),"coffee"===r[r.length-1]&&r.length>1&&r.pop(),r.join(".")):t},t.isCoffee=function(t){return/\.((lit)?coffee|coffee\.md)$/.test(t)},t.isLiterate=function(t){return/\.(litcoffee|coffee\.md)$/.test(t)},t.throwSyntaxError=function(t,n){var e;throw(e=new SyntaxError(t)).location=n,e.toString=p,e.stack=e.toString(),e},t.updateSyntaxError=function(t,n,e){return t.toString===p&&(t.code||(t.code=n),t.filename||(t.filename=e),t.stack=t.toString()),t},p=function(){var t,n,e,r,o,i,a,l,s,u,c,f,p,h;if(!this.code||!this.location)return Error.prototype.toString.call(this);var m=this.location;return a=m.first_line,i=m.first_column,null==(s=m.last_line)&&(s=a),null==(l=m.last_column)&&(l=i),o=this.filename||"[stdin]",t=this.code.split("\n")[a],r=a===s?l+1:t.length,u=t.slice(0,h=i).replace(/[^\s]/g," ")+d("^",r-h),"undefined"!=typeof process&&null!==process&&(e=(null!=(c=process.stdout)?c.isTTY:void 0)&&!(null!=(f=process.env)?f.NODE_DISABLE_COLORS:void 0)),(null!=(p=this.colorful)?p:e)&&(n=function(t){return"[1;31m"+t+"[0m"},t=t.slice(0,h)+n(t.slice(h,r))+t.slice(r),u=n(u)),o+":"+(a+1)+":"+(i+1)+": error: "+this.message+"\n"+t+"\n"+u},t.nameWhitespaceCharacter=function(t){switch(t){case" ":return"space";case"\n":return"newline";case"\r":return"carriage return";case"\t":return"tab";default:return t}},t.parseNumber=function(t){var n;return null==t?NaN:null!=(n=function(){switch(t.charAt(1)){case"b":return 2;case"o":return 8;case"x":return 16;default:return null}}())?parseInt(t.slice(2).replace(/_/g,""),n):parseFloat(t.replace(/_/g,""))},t.isFunction=function(t){return"[object Function]"===Object.prototype.toString.call(t)},t.isNumber=u=function(t){return"[object Number]"===Object.prototype.toString.call(t)},t.isString=c=function(t){return"[object String]"===Object.prototype.toString.call(t)},t.isBoolean=s=function(t){return!0===t||!1===t||"[object Boolean]"===Object.prototype.toString.call(t)},t.isPlainObject=function(t){return!("object"!=typeof t||!t||Array.isArray(t)||u(t)||c(t)||s(t))},h=function(t){var n,e;return e=function(t){var n;return n=t.toString(16),"\\u"+d("0",4-n.length)+n},t<65536?e(t):(n=(t-65536)%1024+56320,""+e(Math.floor((t-65536)/1024)+55296)+e(n))},t.replaceUnicodeCodePointEscapes=function(t,e){var r,o=void 0===e?{}:e,i=o.flags,a=o.error,l=o.delimiter,s=void 0===l?"":l;return r=null!=i&&m.call(i,"u")<0,t.replace(n,function(t,n,e,o){var i;return n||((i=parseInt(e,16))>1114111&&a("unicode code point escapes greater than \\u{10ffff} are not allowed",{offset:o+s.length,length:e.length+4}),r?h(i):t)})},n=/(\\\\)|\\u\{([\da-fA-F]+)\}/g}.call(r),$=jQuery;var a=jQuery,l=null;Drupal.behaviors.campaignion_loqate={},Drupal.behaviors.campaignion_loqate.attach=function(t,n){n.loqate&&!l&&(l=new e(n.loqate)),a(document).bind("clientsideValidationAddCustomRules",function(t){jQuery.validator.addMethod("loqateSortCode",function(t,n,e){var r=this,a=this.previousValue(n);return a.old===t?a.valid:(a.old=t,a.message=this.defaultMessage(n,"loqateSortCode"),this.startRequest(n),l.validateSortCode(t).then(function(t){var e=!t.Error;r.stopRequest(n,e),a.valid=e,e?o.call(r,n):i.call(r,n,a.message)}),"pending")}),jQuery.validator.addMethod("loqateAccount",function(t,n,e){var r=this,s=a(e.sortCodeElement);if(!s.is(":filled")||!s.valid())return"dependency-mismatch";var u=this.previousValue(n);return u.old===t?u.valid:(u.old=t,u.message=this.defaultMessage(n,"loqateAccount"),this.startRequest(n),l.validateAccount(s.val(),t).then(function(t){var e=!t.Error;r.stopRequest(n,e),u.valid=e,e?o.call(r,n):i.call(r,n,u.message)}),"pending")})})}});
//# sourceMappingURL=main.umd.js.map
